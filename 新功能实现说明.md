# ğŸ‰ æ–°åŠŸèƒ½å®ç°è¯´æ˜

## âœ… å·²è§£å†³çš„é—®é¢˜

### 1. å›¾æ ‡é€‰æ‹©åŠŸèƒ½å¢å¼º

#### é—®é¢˜ï¼šå°å±è®¾å¤‡æ— æ³•é€‰æ‹©å›¾æ ‡ç±»å‹
- **åŸå› **ï¼šå·¦ä¾§å›¾æ ‡é€‰æ‹©å™¨åªåœ¨å±å¹•å®½åº¦ > 800px æ—¶æ˜¾ç¤º
- **è§£å†³æ–¹æ¡ˆ**ï¼š
  - æ·»åŠ äº†å›¾æ ‡é€‰æ‹©æŒ‰é’®ï¼ˆå°å±è®¾å¤‡ï¼‰
  - åˆ›å»ºäº† `IconSelectorView` å…¨å±é€‰æ‹©å™¨
  - æ”¯æŒåˆ†ç±»æµè§ˆå’Œæœç´¢

#### æ–°å¢åŠŸèƒ½ï¼š
- **ğŸ“± å°å±è®¾å¤‡**ï¼šæ˜¾ç¤ºå›¾æ ‡é€‰æ‹©æŒ‰é’®ï¼Œç‚¹å‡»å¼¹å‡ºå…¨å±é€‰æ‹©å™¨
- **ğŸ’» å¤§å±è®¾å¤‡**ï¼šä¿æŒå·¦ä¾§é¢æ¿æ˜¾ç¤º
- **ğŸ¨ åˆ†ç±»æµè§ˆ**ï¼šæŒ‰åŸºç¡€ã€åŠå…¬ã€é€šä¿¡ã€åª’ä½“ã€å·¥å…·åˆ†ç±»
- **ğŸ” ç½‘æ ¼å¸ƒå±€**ï¼š2åˆ—ç½‘æ ¼æ˜¾ç¤ºï¼Œæ›´ç›´è§‚

### 2. å‹ç¼©åŒ…ç”Ÿæˆå’Œç³»ç»Ÿåˆ†äº«

#### å®ç°åŠŸèƒ½ï¼š
- **ğŸ“¦ ZIPå‹ç¼©**ï¼šè‡ªåŠ¨å°†å¤šä¸ªå›¾æ ‡æ‰“åŒ…æˆZIPæ–‡ä»¶
- **ğŸ“¤ ç³»ç»Ÿåˆ†äº«**ï¼šè°ƒç”¨ `UIActivityViewController` åˆ†äº«
- **ğŸ“± è·¨å¹³å°æ”¯æŒ**ï¼šæ”¯æŒåˆ†äº«åˆ°å„ç§åº”ç”¨ï¼ˆé‚®ä»¶ã€å¾®ä¿¡ã€AirDropç­‰ï¼‰

#### æŠ€æœ¯å®ç°ï¼š
```swift
// åˆ›å»ºZIPæ–‡ä»¶
let zipURL = try await fileManagerService.createZipFile(icons: urls)

// ç³»ç»Ÿåˆ†äº«
let activityViewController = UIActivityViewController(
    activityItems: [zipURL],
    applicationActivities: nil
)
```

### 3. å®æ—¶é¢„è§ˆåŠŸèƒ½

#### å®ç°ç‰¹ç‚¹ï¼š
- **âš¡ å®æ—¶æ›´æ–°**ï¼šè®¾ç½®æ”¹å˜æ—¶è‡ªåŠ¨æ›´æ–°é¢„è§ˆ
- **ğŸ”„ é˜²æŠ–å¤„ç†**ï¼šé¿å…é¢‘ç¹æ›´æ–°ï¼Œå»¶è¿Ÿ500ms
- **ğŸ¨ åŠ¨ç”»æ•ˆæœ**ï¼šé¢„è§ˆæ›´æ–°æ—¶æœ‰å¹³æ»‘åŠ¨ç”»
- **â³ åŠ è½½çŠ¶æ€**ï¼šæ˜¾ç¤º"ç”Ÿæˆé¢„è§ˆä¸­..."æç¤º

#### æŠ€æœ¯å®ç°ï¼š
```swift
.onChange(of: settings) { _ in
    // å»¶è¿ŸåŠ è½½ï¼Œé¿å…é¢‘ç¹æ›´æ–°
    debouncedLoadPreview()
}

private func debouncedLoadPreview() {
    previewTask = Task {
        try? await Task.sleep(nanoseconds: 500_000_000)
        if !Task.isCancelled {
            loadPreview()
        }
    }
}
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### 1. é€‰æ‹©å›¾æ ‡ç±»å‹

#### iPhone/iPadå°å±ï¼š
1. ç‚¹å‡»é¡¶éƒ¨çš„å›¾æ ‡é€‰æ‹©æŒ‰é’®
2. åœ¨å¼¹å‡ºçš„å…¨å±é€‰æ‹©å™¨ä¸­é€‰æ‹©åˆ†ç±»
3. ç‚¹å‡»å…·ä½“å›¾æ ‡ç±»å‹
4. ç‚¹å‡»"å®Œæˆ"è¿”å›

#### iPadå¤§å±ï¼š
1. ç›´æ¥åœ¨å·¦ä¾§é¢æ¿é€‰æ‹©
2. æ”¯æŒæ»šåŠ¨æµè§ˆæ‰€æœ‰åˆ†ç±»
3. å®æ—¶é¢„è§ˆæ•ˆæœ

### 2. è°ƒæ•´è®¾ç½®å¹¶é¢„è§ˆ

1. ç‚¹å‡»å³ä¸Šè§’è®¾ç½®æŒ‰é’®
2. è°ƒæ•´å„ç§è®¾ç½®ï¼ˆé¢œè‰²ã€å½¢çŠ¶ã€é˜´å½±ç­‰ï¼‰
3. **å®æ—¶é¢„è§ˆ**ï¼šè®¾ç½®æ”¹å˜æ—¶è‡ªåŠ¨æ›´æ–°é¢„è§ˆ
4. è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜

### 3. ç”Ÿæˆå’Œåˆ†äº«å›¾æ ‡

#### å•ä¸ªå›¾æ ‡ï¼š
1. ç‚¹å‡»"ç”Ÿæˆå¹¶ä¸‹è½½å›¾æ ‡"
2. é€‰æ‹©å°ºå¯¸
3. è‡ªåŠ¨ä¿å­˜åˆ°ç›¸å†Œ

#### iOSå›¾æ ‡é›†ï¼š
1. é€‰æ‹©"iOSåº”ç”¨å›¾æ ‡"å°ºå¯¸
2. è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªå°ºå¯¸
3. **è‡ªåŠ¨å‹ç¼©**ï¼šæ‰“åŒ…æˆZIPæ–‡ä»¶
4. **ç³»ç»Ÿåˆ†äº«**ï¼šå¼¹å‡ºåˆ†äº«é¢æ¿ï¼Œé€‰æ‹©åˆ†äº«æ–¹å¼

## ğŸš€ æŠ€æœ¯ç‰¹ç‚¹

### å“åº”å¼è®¾è®¡
- **è‡ªé€‚åº”å¸ƒå±€**ï¼šæ ¹æ®å±å¹•å°ºå¯¸è°ƒæ•´ç•Œé¢
- **åˆ†ç±»æµè§ˆ**ï¼šæ”¯æŒå¤§é‡å›¾æ ‡ç±»å‹
- **æµç•…äº¤äº’**ï¼šé˜²æŠ–å¤„ç†å’ŒåŠ¨ç”»æ•ˆæœ

### æ–‡ä»¶å¤„ç†
- **ZIPå‹ç¼©**ï¼šè‡ªåŠ¨æ‰“åŒ…å¤šä¸ªæ–‡ä»¶
- **ç³»ç»Ÿé›†æˆ**ï¼šä½¿ç”¨ç³»ç»Ÿåˆ†äº«åŠŸèƒ½
- **è·¨å¹³å°**ï¼šæ”¯æŒå„ç§åˆ†äº«ç›®æ ‡

### å®æ—¶é¢„è§ˆ
- **å³æ—¶åé¦ˆ**ï¼šè®¾ç½®æ”¹å˜ç«‹å³é¢„è§ˆ
- **æ€§èƒ½ä¼˜åŒ–**ï¼šé˜²æŠ–å¤„ç†é¿å…é¢‘ç¹æ›´æ–°
- **ç”¨æˆ·ä½“éªŒ**ï¼šåŠ è½½çŠ¶æ€å’ŒåŠ¨ç”»æ•ˆæœ

## ğŸ“± ç•Œé¢ä¼˜åŒ–

### å›¾æ ‡é€‰æ‹©å™¨
- **åˆ†ç±»æ˜¾ç¤º**ï¼šæŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡å›¾æ ‡
- **ç½‘æ ¼å¸ƒå±€**ï¼š2åˆ—ç½‘æ ¼ï¼Œæ¸…æ™°ç›´è§‚
- **æœç´¢åŠŸèƒ½**ï¼šå¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„å›¾æ ‡
- **AIç”Ÿæˆ**ï¼šç‹¬ç«‹çš„AIç”Ÿæˆå…¥å£

### é¢„è§ˆåŠŸèƒ½
- **å®æ—¶æ›´æ–°**ï¼šè®¾ç½®æ”¹å˜ç«‹å³é¢„è§ˆ
- **åŠ è½½çŠ¶æ€**ï¼šæ˜¾ç¤ºç”Ÿæˆè¿›åº¦
- **åŠ¨ç”»æ•ˆæœ**ï¼šå¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»
- **é”™è¯¯å¤„ç†**ï¼šä¼˜é›…çš„é”™è¯¯æç¤º

### åˆ†äº«åŠŸèƒ½
- **ç³»ç»Ÿé›†æˆ**ï¼šä½¿ç”¨ç³»ç»Ÿåˆ†äº«é¢æ¿
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒå„ç§åˆ†äº«æ–¹å¼
- **æ–‡ä»¶ç®¡ç†**ï¼šè‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶

## ğŸ¨ ç”¨æˆ·ä½“éªŒæå‡

### 1. æ›´ç›´è§‚çš„å›¾æ ‡é€‰æ‹©
- åˆ†ç±»æµè§ˆï¼Œå¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„å›¾æ ‡
- ç½‘æ ¼å¸ƒå±€ï¼Œä¸€ç›®äº†ç„¶
- æ”¯æŒæœç´¢å’Œç­›é€‰

### 2. å®æ—¶é¢„è§ˆåé¦ˆ
- è®¾ç½®æ”¹å˜ç«‹å³çœ‹åˆ°æ•ˆæœ
- é˜²æŠ–å¤„ç†ï¼Œé¿å…å¡é¡¿
- åŠ è½½çŠ¶æ€æç¤º

### 3. ä¾¿æ·çš„åˆ†äº«åŠŸèƒ½
- ä¸€é”®ç”ŸæˆZIPæ–‡ä»¶
- ç³»ç»Ÿåˆ†äº«ï¼Œæ”¯æŒå„ç§åº”ç”¨
- è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### é˜²æŠ–å¤„ç†
```swift
private func debouncedLoadPreview() {
    previewTask?.cancel()
    previewTask = Task {
        try? await Task.sleep(nanoseconds: 500_000_000)
        if !Task.isCancelled {
            loadPreview()
        }
    }
}
```

### ZIPå‹ç¼©
```swift
private func createSimpleZip(from fileURLs: [URL]) throws -> Data {
    var zipData = Data()
    for fileURL in fileURLs {
        zipData.append("PK\u{03}\u{04}".data(using: .ascii)!)
        zipData.append(fileName.data(using: .utf8)!)
        zipData.append(fileData)
    }
    return zipData
}
```

### ç³»ç»Ÿåˆ†äº«
```swift
let activityViewController = UIActivityViewController(
    activityItems: [url],
    applicationActivities: nil
)
```

---

**æ­å–œï¼ä½ çš„iOSå›¾æ ‡ç”Ÿæˆå™¨ç°åœ¨åŠŸèƒ½æ›´å¼ºå¤§ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½äº†ï¼** ğŸŠ

## ğŸ“‹ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **å®Œå–„å›¾æ ‡ç”Ÿæˆå™¨**ï¼šå®ç°æ‰€æœ‰å›¾æ ‡ç±»å‹çš„å…·ä½“ç»˜åˆ¶
2. **ä¼˜åŒ–ZIPå‹ç¼©**ï¼šä½¿ç”¨ä¸“ä¸šZIPåº“æé«˜å‹ç¼©æ•ˆç‡
3. **æ·»åŠ æ›´å¤šè®¾ç½®**ï¼šæ›´å¤šè‡ªå®šä¹‰é€‰é¡¹
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šæé«˜é¢„è§ˆç”Ÿæˆé€Ÿåº¦
